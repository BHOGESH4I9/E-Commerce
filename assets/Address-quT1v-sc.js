import{r as m,d as h,j as e,C as F,e as j,f as H,u as A,o as d,B as v,a as I}from"./index-CsMKVvWM.js";function g(t,n){return Array.isArray(t)?t.includes(n):t===n}const y=m.createContext({});y.displayName="AccordionContext";const C=m.forwardRef(({as:t="div",bsPrefix:n,className:o,children:a,eventKey:l,...s},r)=>{const{activeEventKey:c}=m.useContext(y);return n=h(n,"accordion-collapse"),e.jsx(F,{ref:r,in:g(c,l),...s,className:j(o,n),children:e.jsx(t,{children:m.Children.only(a)})})});C.displayName="AccordionCollapse";const f=m.createContext({eventKey:""});f.displayName="AccordionItemContext";const w=m.forwardRef(({as:t="div",bsPrefix:n,className:o,onEnter:a,onEntering:l,onEntered:s,onExit:r,onExiting:c,onExited:i,...p},u)=>{n=h(n,"accordion-body");const{eventKey:N}=m.useContext(f);return e.jsx(C,{eventKey:N,onEnter:a,onEntering:l,onEntered:s,onExit:r,onExiting:c,onExited:i,children:e.jsx(t,{ref:u,...p,className:j(o,n)})})});w.displayName="AccordionBody";function q(t,n){const{activeEventKey:o,onSelect:a,alwaysOpen:l}=m.useContext(y);return s=>{let r=t===o?null:t;l&&(Array.isArray(o)?o.includes(t)?r=o.filter(c=>c!==t):r=[...o,t]:r=[t]),a?.(r,s),n?.(s)}}const b=m.forwardRef(({as:t="button",bsPrefix:n,className:o,onClick:a,...l},s)=>{n=h(n,"accordion-button");const{eventKey:r}=m.useContext(f),c=q(r,a),{activeEventKey:i}=m.useContext(y);return t==="button"&&(l.type="button"),e.jsx(t,{ref:s,onClick:c,...l,"aria-expanded":Array.isArray(i)?i.includes(r):r===i,className:j(o,n,!g(i,r)&&"collapsed")})});b.displayName="AccordionButton";const S=m.forwardRef(({as:t="h2","aria-controls":n,bsPrefix:o,className:a,children:l,onClick:s,...r},c)=>(o=h(o,"accordion-header"),e.jsx(t,{ref:c,...r,className:j(a,o),children:e.jsx(b,{onClick:s,"aria-controls":n,children:l})})));S.displayName="AccordionHeader";const k=m.forwardRef(({as:t="div",bsPrefix:n,className:o,eventKey:a,...l},s)=>{n=h(n,"accordion-item");const r=m.useMemo(()=>({eventKey:a}),[a]);return e.jsx(f.Provider,{value:r,children:e.jsx(t,{ref:s,...l,className:j(o,n)})})});k.displayName="AccordionItem";const B=m.forwardRef((t,n)=>{const{as:o="div",activeKey:a,bsPrefix:l,className:s,onSelect:r,flush:c,alwaysOpen:i,...p}=H(t,{activeKey:"onSelect"}),u=h(l,"accordion"),N=m.useMemo(()=>({activeEventKey:a,onSelect:r,alwaysOpen:i}),[a,r,i]);return e.jsx(y.Provider,{value:N,children:e.jsx(o,{ref:n,...p,className:j(s,u,c&&`${u}-flush`)})})});B.displayName="Accordion";const x=Object.assign(B,{Button:b,Collapse:C,Item:k,Header:S,Body:w}),D=()=>{const{addresses:t,deleteAddress:n,selectedAddressIndex:o,setSelectedAddressIndex:a}=A(),l=s=>{a(s)};return e.jsx(e.Fragment,{children:t.map((s,r)=>e.jsxs(x.Item,{eventKey:r.toString(),children:[e.jsxs(x.Header,{children:[e.jsx(d.Check,{type:"radio",name:"selectedAddress",className:"me-2",checked:o===r,onChange:()=>l(r)}),e.jsx("strong",{children:s.name})," (",s.type,") - ",s.mobile]}),e.jsx(x.Body,{children:o===r&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-1",children:s.address}),e.jsxs("p",{className:"mb-1",children:[s.city,", ",s.state," - ",s.pincode]}),e.jsxs("div",{className:"d-flex gap-2 mt-2",children:[e.jsx(v,{variant:"warning",children:"Deliver Here"}),e.jsx(v,{variant:"outline-danger",onClick:()=>n(r),children:"Delete"})]})]})})]},r))})},E=()=>{const{addAddress:t}=A(),[n,o]=m.useState(!1),[a,l]=m.useState({name:"",mobile:"",address:"",city:"",state:"",pincode:"",type:"Home"}),s=c=>{const{name:i,value:p}=c.target;l(u=>({...u,[i]:p}))},r=c=>{c.preventDefault(),t(a),o(!1),l({name:"",mobile:"",address:"",city:"",state:"",pincode:"",type:"Home"})};return e.jsxs(x.Item,{eventKey:"add",children:[e.jsx(x.Header,{onClick:()=>o(!n),children:"+ Add a new address"}),e.jsx(x.Body,{children:n&&e.jsxs(d,{onSubmit:r,className:"row g-3",children:[e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"Name *"}),e.jsx(d.Control,{type:"text",name:"name",value:a.name,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"Mobile *"}),e.jsx(d.Control,{type:"tel",name:"mobile",value:a.mobile,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"Pincode *"}),e.jsx(d.Control,{type:"text",name:"pincode",value:a.pincode,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"City *"}),e.jsx(d.Control,{type:"text",name:"city",value:a.city,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"State *"}),e.jsx(d.Control,{type:"text",name:"state",value:a.state,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-6",children:[e.jsx(d.Label,{children:"Address *"}),e.jsx(d.Control,{as:"textarea",name:"address",rows:2,value:a.address,onChange:s,required:!0})]}),e.jsxs(d.Group,{className:"col-md-12",children:[e.jsx(d.Label,{children:"Address Type"}),e.jsxs("div",{children:[e.jsx(d.Check,{inline:!0,type:"radio",name:"type",label:"Home",value:"Home",checked:a.type==="Home",onChange:s}),e.jsx(d.Check,{inline:!0,type:"radio",name:"type",label:"Work",value:"Work",checked:a.type==="Work",onChange:s})]})]}),e.jsx("div",{className:"text-end",children:e.jsx(v,{type:"submit",className:"btn btn-primary px-4 mt-3",children:"Save and Deliver Here"})})]})})]})},O=()=>e.jsxs("div",{className:"container my-4",children:[e.jsx("h4",{className:"mb-4 fw-bold",children:"1. Delivery Address"}),e.jsxs(x,{alwaysOpen:!0,children:[e.jsx(D,{}),e.jsx(E,{})]})]}),R=()=>{const{cartItems:t}=A(),n=I(),o=c=>Math.round(c.price/(1-c.discountPercentage/100)),a=()=>t.reduce((c,i)=>c+o(i)*i.quantity,0),l=()=>t.reduce((c,i)=>c+(o(i)-i.price)*i.quantity,0),s=()=>3,r=()=>a()-l()+s();return e.jsxs("div",{className:"container my-4",children:[e.jsx("h4",{className:"mb-4 fw-bold",children:"2. Order Summary"}),e.jsx(x,{defaultActiveKey:"0",children:e.jsxs(x.Item,{eventKey:"0",children:[e.jsx(x.Header,{children:"View Order Summary"}),e.jsxs(x.Body,{children:[t.map(c=>e.jsxs("div",{className:"d-flex justify-content-between align-items-center border-bottom py-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:c.title}),e.jsxs("small",{children:["Qty: ",c.quantity," × ₹",c.price]})]}),e.jsxs("div",{className:"fw-bold",children:["₹",c.quantity*c.price]})]},c.id)),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Total MRP"}),e.jsxs("span",{children:["₹",a()]})]}),e.jsxs("div",{className:"d-flex justify-content-between text-success",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ₹",l().toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Platform Fee"}),e.jsxs("span",{children:["₹",s()]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["₹",r().toFixed(2)]})]}),e.jsxs("div",{className:"text-success mt-2",children:["You will save ₹",(l()-s()).toFixed(2)," on this order"]}),e.jsx("div",{className:"text-end mt-4",children:e.jsx(v,{variant:"primary",onClick:()=>n("/checkout/payment"),children:"Continue"})})]})]})})]})},G=()=>e.jsxs("div",{className:"container",children:[e.jsx("h3",{className:"fw-bold mb-4",children:"Checkout"}),e.jsx(O,{}),e.jsx(R,{})]});export{G as default};
