import{r as s,d as U,j as e,e as T,f as Te,g as $e,h as Pe,i as Ae,k as ce,t as De,m as le,A as ie,T as Me,l as Le,n as Oe,a as Fe,u as Xe}from"./index-IJtp9R1t.js";import{u as _e}from"./useTimeout-BVRxPi1j.js";function He(c,i){const r=s.useRef(!0);s.useEffect(()=>{if(r.current){r.current=!1;return}return c()},i)}const ue=s.forwardRef(({className:c,bsPrefix:i,as:r="div",...p},x)=>(i=U(i,"carousel-caption"),e.jsx(r,{ref:x,className:T(c,i),...p})));ue.displayName="CarouselCaption";const de=s.forwardRef(({as:c="div",bsPrefix:i,className:r,...p},x)=>{const u=T(r,U(i,"carousel-item"));return e.jsx(c,{ref:x,...p,className:u})});de.displayName="CarouselItem";const Be=40;function Ke(c){if(!c||!c.style||!c.parentNode||!c.parentNode.style)return!1;const i=getComputedStyle(c);return i.display!=="none"&&i.visibility!=="hidden"&&getComputedStyle(c.parentNode).display!=="none"}const he=s.forwardRef(({defaultActiveIndex:c=0,...i},r)=>{const{as:p="div",bsPrefix:x,slide:u=!0,fade:A=!1,controls:D=!0,indicators:R=!0,indicatorLabels:b=[],activeIndex:n,onSelect:o,onSlide:v,onSlid:S,interval:E=5e3,keyboard:V=!0,onKeyDown:M,pause:g="hover",onMouseOver:L,onMouseOut:O,wrap:k=!0,touch:W=!0,onTouchStart:F,onTouchMove:X,onTouchEnd:_,prevIcon:me=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:Q="Previous",nextIcon:fe=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:q="Next",variant:z,className:xe,children:H,...pe}=Te({defaultActiveIndex:c,...i},{activeIndex:"onSelect"}),m=U(x,"carousel"),C=$e(),y=s.useRef(null),[G,J]=s.useState("next"),[ve,$]=s.useState(!1),[w,Y]=s.useState(!1),[l,je]=s.useState(n||0);s.useEffect(()=>{!w&&n!==l&&(y.current?J(y.current):J((n||0)>l?"next":"prev"),u&&Y(!0),je(n||0))},[n,w,l,u]),s.useEffect(()=>{y.current&&(y.current=null)});let j=0,Z;Pe(H,(t,a)=>{++j,a===n&&(Z=t.props.interval)});const ee=Ae(Z),d=s.useCallback(t=>{if(w)return;let a=l-1;if(a<0){if(!k)return;a=j-1}y.current="prev",o?.(a,t)},[w,l,o,k,j]),h=ce(t=>{if(w)return;let a=l+1;if(a>=j){if(!k)return;a=0}y.current="next",o?.(a,t)}),B=s.useRef();s.useImperativeHandle(r,()=>({element:B.current,prev:d,next:h}));const te=ce(()=>{!document.hidden&&Ke(B.current)&&(C?d():h())}),N=G==="next"?"start":"end";He(()=>{u||(v?.(l,N),S?.(l,N))},[l]);const Ne=`${m}-item-${G}`,be=`${m}-item-${N}`,ge=s.useCallback(t=>{De(t),v?.(l,N)},[v,l,N]),Ce=s.useCallback(()=>{Y(!1),S?.(l,N)},[S,l,N]),ye=s.useCallback(t=>{if(V&&!/input|textarea/i.test(t.target.tagName))switch(t.key){case"ArrowLeft":t.preventDefault(),C?h(t):d(t);return;case"ArrowRight":t.preventDefault(),C?d(t):h(t);return}M?.(t)},[V,M,d,h,C]),we=s.useCallback(t=>{g==="hover"&&$(!0),L?.(t)},[g,L]),Re=s.useCallback(t=>{$(!1),O?.(t)},[O]),se=s.useRef(0),P=s.useRef(0),ne=_e(),Se=s.useCallback(t=>{se.current=t.touches[0].clientX,P.current=0,g==="hover"&&$(!0),F?.(t)},[g,F]),Ee=s.useCallback(t=>{t.touches&&t.touches.length>1?P.current=0:P.current=t.touches[0].clientX-se.current,X?.(t)},[X]),ke=s.useCallback(t=>{if(W){const a=P.current;Math.abs(a)>Be&&(a>0?d(t):h(t))}g==="hover"&&ne.set(()=>{$(!1)},E||void 0),_?.(t)},[W,g,d,h,ne,E,_]),ae=E!=null&&!ve&&!w,K=s.useRef();s.useEffect(()=>{var t,a;if(!ae)return;const f=C?d:h;return K.current=window.setInterval(document.visibilityState?te:f,(t=(a=ee.current)!=null?a:E)!=null?t:void 0),()=>{K.current!==null&&clearInterval(K.current)}},[ae,d,h,ee,E,te,C]);const re=s.useMemo(()=>R&&Array.from({length:j},(t,a)=>f=>{o?.(a,f)}),[R,j,o]);return e.jsxs(p,{ref:B,...pe,onKeyDown:ye,onMouseOver:we,onMouseOut:Re,onTouchStart:Se,onTouchMove:Ee,onTouchEnd:ke,className:T(xe,m,u&&"slide",A&&`${m}-fade`,z&&`${m}-${z}`),children:[R&&e.jsx("div",{className:`${m}-indicators`,children:le(H,(t,a)=>e.jsx("button",{type:"button","data-bs-target":"","aria-label":b!=null&&b.length?b[a]:`Slide ${a+1}`,className:a===l?"active":void 0,onClick:re?re[a]:void 0,"aria-current":a===l},a))}),e.jsx("div",{className:`${m}-inner`,children:le(H,(t,a)=>{const f=a===l;return u?e.jsx(Me,{in:f,onEnter:f?ge:void 0,onEntered:f?Ce:void 0,addEndListener:Le,children:(I,Ie)=>s.cloneElement(t,{...Ie,className:T(t.props.className,f&&I!=="entered"&&Ne,(I==="entered"||I==="exiting")&&"active",(I==="entering"||I==="exiting")&&be)})}):s.cloneElement(t,{className:T(t.props.className,f&&"active")})})}),D&&e.jsxs(e.Fragment,{children:[(k||n!==0)&&e.jsxs(ie,{className:`${m}-control-prev`,onClick:d,children:[me,Q&&e.jsx("span",{className:"visually-hidden",children:Q})]}),(k||n!==j-1)&&e.jsxs(ie,{className:`${m}-control-next`,onClick:h,children:[fe,q&&e.jsx("span",{className:"visually-hidden",children:q})]})]})]})});he.displayName="Carousel";const oe=Object.assign(he,{Caption:ue,Item:de}),We=()=>{const{id:c}=Oe(),i=Fe(),[r,p]=s.useState(null),[x,u]=s.useState(1),{addToCart:A,allProducts:D}=Xe();s.useEffect(()=>{(async()=>{try{const v=await(await fetch(`https://dummyjson.com/products/${c}`)).json();p(v),u(1),window.scrollTo(0,0)}catch(o){console.error("Failed to fetch product details:",o)}})()},[c]);const R=()=>{for(let n=0;n<x;n++)A(r)},b=D.filter(n=>n.category===r?.category&&n.id!==r.id);return r?e.jsxs("div",{className:"container my-5 product-view-container fade-in",children:[e.jsxs("div",{className:"row g-5",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(oe,{fade:!0,interval:3e3,children:[r.thumbnail,...r.images].map((n,o)=>e.jsx(oe.Item,{children:e.jsx("img",{src:n,alt:`${r.title}-${o}`,className:"img-fluid object-fit-contain rounded shadow w-100",style:{height:"400px",objectFit:"cover"}})},o))})}),e.jsxs("div",{className:"col-md-6 product-details",children:[e.jsx("h2",{children:r.title}),e.jsx("p",{className:"text-muted",children:r.description}),e.jsxs("h4",{className:"text-primary",children:["$",r.price]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Brand:"})," ",r.brand]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",r.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"})," ⭐ ",r.rating]}),e.jsxs("div",{className:"d-flex align-items-center mt-3 gap-3",children:[e.jsx("strong",{children:"Quantity:"}),e.jsxs("div",{className:"btn-group quantity-controls",children:[e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>u(n=>n>1?n-1:1),children:"-"}),e.jsx("span",{className:"btn border-black btn-light",children:x}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>u(n=>n+1),children:"+"})]})]}),e.jsx("button",{className:"btn btn-primary p-1 w-25 mt-4",onClick:R,children:"Add to Cart"})]})]}),e.jsxs("div",{className:"similar-section mt-5",children:[e.jsx("h4",{className:"mb-3",children:"Similar Products"}),b.length>0?e.jsx("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4 g-4",children:b.slice(0,8).map(n=>e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card h-100 shadow-sm hover-shadow",onClick:()=>i(`/product/${n.id}`),style:{cursor:"pointer"},children:[e.jsx("img",{src:n.thumbnail,alt:n.title,className:"card-img-top",style:{height:"180px",objectFit:"cover"}}),e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title mb-1",children:n.title}),e.jsxs("p",{className:"text-muted small",children:["$",n.price]})]})]})},n.id))}):e.jsx("p",{className:"text-muted",children:"No similar products available in this category."})]})]}):e.jsx("div",{className:"text-center mt-5",children:"Loading product details..."})};export{We as default};
